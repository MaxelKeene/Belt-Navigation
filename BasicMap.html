<!DOCTYPE html>
<html>
  <head>
    <title>Accessing arguments in UI events</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="./Websocket.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyADvAJL5SLONEmQhAEueC88sYRt6wHcGHQ&sensor=false"></script>
    <script>
// Enable the visual refresh
google.maps.visualRefresh = true;
var map;
var targetMarker;
var locationMarker;
var angleMarker;
var startView;
var endView;

function initialize() {
  webSocketInit();
  mapOptions = {
        zoom: 18,
        //center: myLocation
        center: new google.maps.LatLng(37.74, -122.419),
      };
      map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);

      google.maps.event.addListener(map, 'click', function(e) {
        targetMarker.setPosition(e.latLng);
        endView.setPosition(e.latLng);
        myTarget = e.latLng;
        setTarget(e.latLng);
        //console.log(e.latLng.lat().toString());
      });
}

function placeLocation(position, map) {
  locationMarker = new google.maps.Marker({
    position: position,
    icon: {
      path: google.maps.SymbolPath.CIRCLE,
      fillColor: 'blue',
      fillOpacity: 0.8,
      scale: 7,
      strokeColor: 'lightblue',
      strokeWeight: 1
    },
    map: map
  });
  //map.panTo(position);
}
function placeAngle(position, map) {
  angleMarker = new google.maps.Marker({
    position: position,
    icon: {
      path: google.maps.SymbolPath.FORWARD_CLOSED_ARROW,
      fillColor: 'blue',
      fillOpacity: 0.8,
      scale: 3,
      strokeColor: 'lightblue',
      strokeWeight: 1,
      anchor: new google.maps.Point(0,6)
    },
    map: map
  });
  //map.panTo(position);
}

function placeTarget(position, map) {
  targetMarker = new google.maps.Marker({
    position: position,
    map: map
  });
  //map.panTo(position);
}
function loadStreetViews(){
  var start_panoramaOptions = {
    position: myLocation,
    pov: {
      heading: angle/10,
      pitch: 0
    }
  };
  var end_panoramaOptions = {
    position: myTarget,
    pov: {
      heading: angle/10,
      pitch: 0
    }
  };
  startView = new  google.maps.StreetViewPanorama(document.getElementById("start-streetView"), start_panoramaOptions);
  endView = new  google.maps.StreetViewPanorama(document.getElementById("end-streetView"), end_panoramaOptions);
}

google.maps.event.addDomListener(window, 'load', initialize);

    </script>
  </head>
  <body>
    <div id="map-canvas" style="height:70%"></div>
    <div id="start-streetView" style="height:30%; width: 50%; background:blue"></div>
    <div id="end-streetView" style="height:30%; width: 50%;  top: -30%;left: 50%;position: relative;background:red"></div>
  </body>
</html>